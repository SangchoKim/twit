{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RNiq:function(t,e,n){\"use strict\";n.r(e);var a=n(\"ln6h\"),c=n.n(a),r=n(\"pLtp\"),i=n.n(r),l=n(\"O40h\"),u=n(\"q1tI\"),o=n.n(u),s=n(\"/MKj\"),p=n(\"Vl3Y\"),f=n(\"5rEg\"),d=n(\"2/Rp\"),b=n(\"p+NB\"),m=o.a.createElement,h=function(){var t=Object(s.b)(),e=Object(u.useState)(\"\"),n=e[0],a=e[1],c=Object(s.c)(function(t){return t.post}),r=c.imagePaths,i=c.isAddingPost,l=c.postAdded,o=Object(u.useRef)();Object(u.useEffect)(function(){l&&a(\"\")},[l]);var h=Object(u.useCallback)(function(e){if(e.preventDefault(),!n||!n.trim())return alert(\"\\uac8c\\uc2dc\\uae00\\uc744 \\uc791\\uc131\\ud558\\uc138\\uc694\");var a=new FormData;r.forEach(function(t){a.append(\"image\",t)}),a.append(\"content\",n),t({type:b.e,data:a})},[n,r]),g=Object(u.useCallback)(function(t){a(t.target.value)},[]),v=Object(u.useCallback)(function(e){console.log(e.target.files);var n=new FormData;[].forEach.call(e.target.files,function(t){n.append(\"image\",t)}),t({type:b.J,data:n})},[]),w=Object(u.useCallback)(function(){o.current.click()},[o.current]),y=Object(u.useCallback)(function(e){return function(){t({type:b.y,index:e})}},[]);return m(p.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onSubmit:h},m(f.a.TextArea,{maxLength:140,placeholder:\"\\uc5b4\\ub5a4 \\uc2e0\\uae30\\ud55c \\uc77c\\uc774 \\uc788\\uc5c8\\ub098\\uc694?\",value:n,onChange:g}),m(\"div\",null,m(\"input\",{type:\"file\",multiple:!0,hidden:!0,ref:o,onChange:v}),m(d.a,{onClick:w},\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"),m(d.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",loading:i},\"\\uc9f9\\uc9f9\")),m(\"div\",null,r.map(function(t,e){return m(\"div\",{key:t,style:{display:\"inline-block\"}},m(\"img\",{src:\"http://localhost:2323/\".concat(t),style:{width:\"200px\"},alt:t}),m(\"div\",null,m(d.a,{onClick:y(e)},\"\\uc81c\\uac70\")))})))},g=n(\"uor+\"),v=o.a.createElement,w=function(){var t=Object(s.c)(function(t){return t.user}).me,e=Object(s.c)(function(t){return t.post}),n=e.mainPosts,a=e.hasMorePost,c=Object(s.b)(),r=Object(u.useRef)([]),i=Object(u.useCallback)(function(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&a){var t=n[n.length-1].id;r.current.includes(t)||(c({type:b.q,lastId:t}),r.current.push(t))}},[a,n.length]);return Object(u.useEffect)(function(){return window.addEventListener(\"scroll\",i),function(){window.removeEventListener(\"scroll\",i)}},[n.length]),v(\"div\",null,t&&v(h,null),n.map(function(t){return v(g.a,{key:t.id,post:t})}))};w.getInitialProps=function(){var t=Object(l.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(i()(e)),e.store.dispatch({type:b.q});case 2:case\"end\":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();e.default=w},vlRD:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){var t=n(\"RNiq\");return{page:t.default||t}}])}},[[\"vlRD\",1,0]]]);"}